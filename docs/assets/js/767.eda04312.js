/*! For license information please see 767.eda04312.js.LICENSE.txt */
(self.webpackChunkunicom=self.webpackChunkunicom||[]).push([[767],{610:(t,e,r)=>{"use strict";var n=r(4836);e.Z=void 0;var o=n(r(4938)),i=r(5893),a=(0,o.default)((0,i.jsx)("path",{d:"M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28zM3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21zm6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39-2.57 0-4.66 1.97-4.66 4.39 0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15zm7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5-.5s.5.22.5.5c0 1.41.72 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12zM14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94 1.7 0 3.08 1.32 3.08 2.94 0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.38-.47.38z"}),"Fingerprint");e.Z=a},362:t=>{t.exports={assetsURL:"/assets/"}},6767:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>_});var n=r(7294),o=(r(3935),r(362),r(310)),i=r(7638),a=r(9250),c=r(9655),u=r(4680),s=r(3906),l=r(2642),f=r(2658),h=r(7109),p=r(9708),d=r(610),y=r(2288),v=r(2981);function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function m(){return m=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},m.apply(this,arguments)}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function b(){b=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof m?e:m,a=Object.create(i.prototype),c=new I(n||[]);return o(a,"_invoke",{value:L(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var h="suspendedStart",p="suspendedYield",d="executing",y="completed",v={};function m(){}function w(){}function E(){}var P={};s(P,a,(function(){return this}));var O=Object.getPrototypeOf,j=O&&O(O(U([])));j&&j!==r&&n.call(j,a)&&(P=j);var S=E.prototype=m.prototype=Object.create(P);function x(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function k(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==g(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function L(e,r,n){var o=h;return function(i,a){if(o===d)throw new Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=_(c,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=d;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:p,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function _(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,_(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,v;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function R(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function U(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(g(e)+" is not iterable")}return w.prototype=E,o(S,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:w,configurable:!0}),w.displayName=s(E,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,s(t,u,"GeneratorFunction")),t.prototype=Object.create(S),t},e.awrap=function(t){return{__await:t}},x(k.prototype),s(k.prototype,c,(function(){return this})),e.AsyncIterator=k,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new k(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(S),s(S,u,"Generator"),s(S,a,(function(){return this})),s(S,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=U,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),R(r),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:U(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),v}},e}function E(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}function P(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){E(i,n,o,a,c,"next",t)}function c(t){E(i,n,o,a,c,"throw",t)}a(void 0)}))}}function O(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,(void 0,o=function(t,e){if("object"!==g(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!==g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(n.key),"symbol"===g(o)?o:String(o)),n)}var o}function j(t,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j(t,e)}function S(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}var k=function(t){return new Promise((function(e,r){var n=new FileReader;n.readAsDataURL(t),n.onload=function(){return e(n.result)},n.onerror=r}))},L=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}(L,t);var e,r,a,c,m,w,E=(m=L,w=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=x(m);if(w){var r=x(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return S(t)}(this,t)});function L(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,L),(e=E.call(this,t)).state={usuario:null,calling:!1,recording:!1,alertOpen:!1,alert:null},e.handleUsuarioFotoChange=e.handleUsuarioFotoChange.bind(S(e)),e.startRecording=e.startRecording.bind(S(e)),e.stopRecording=e.stopRecording.bind(S(e)),e.takePicture=e.takePicture.bind(S(e)),e.handlePicture=e.handlePicture.bind(S(e)),e.openAlert=e.openAlert.bind(S(e)),e.closeAlert=e.closeAlert.bind(S(e)),e}return e=L,r=[{key:"componentDidMount",value:function(){navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia;var t=document.querySelector("video");navigator.getUserMedia({audio:!1,video:!0},(function(e){t.srcObject=e}),(function(t){console.log("navigator.getUserMedia error: ",t)})),setInterval(this.takePicture,1e3)}},{key:"handleUsuarioFotoChange",value:(c=P(b().mark((function t(e){var r,n=this;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=(0,i.LP)(),t.next=3,k(e.target.files[0]);case 3:t.t1=t.sent,r={token:t.t0,img:t.t1},this.setState({calling:!0}),o.Z.post("registro-ponto/registrar-face",r).then((function(t){n.openAlert("success","Usuário identificado com sucesso"),n.setState({usuario:t.data,calling:!1})})).catch((function(t){console.log(t.data),n.openAlert("error","Usuário não identificado"),n.setState({usuario:null,calling:!1})})),e.target.value="";case 8:case"end":return t.stop()}}),t,this)}))),function(t){return c.apply(this,arguments)})},{key:"handlePicture",value:(a=P(b().mark((function t(e){var r,n=this;return b().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r={token:(0,i.LP)(),img:e},this.setState({calling:!0}),o.Z.post("registro-ponto/registrar-face",r).then((function(t){n.openAlert("success","Usuário identificado com sucesso"),n.setState({usuario:t.data,calling:!1})})).catch((function(t){console.log(t.data),n.openAlert("error","Usuário não identificado"),n.setState({usuario:null,calling:!1})}));case 3:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"startRecording",value:function(){this.setState({recording:!0})}},{key:"stopRecording",value:function(){this.setState({recording:!1})}},{key:"takePicture",value:function(){if(this.state.recording&&!this.state.calling){var t=document.getElementById("video"),e=document.getElementById("canvas"),r=e.getContext("2d");e.width=200,e.height=t.videoHeight/t.videoWidth*200,r.drawImage(t,0,0,e.width,e.height);var n=e.toDataURL("image/png");this.handlePicture(n)}}},{key:"openAlert",value:function(t,e){this.setState({alert:n.createElement(y.Z,{severity:t,onClose:this.closeAlert},e),alertOpen:!0})}},{key:"closeAlert",value:function(){this.setState({alertOpen:!1})}},{key:"render",value:function(){return n.createElement(n.Fragment,null,n.createElement(s.Z,{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:"column",height:"100dvh"},n.createElement(s.Z,null),n.createElement(u.Z,{elevation:3,sx:{minWidth:"300px",padding:5}},n.createElement(p.Z,{justifyContent:"center",alignItems:"center",gap:3},n.createElement(f.Z,{variant:"h3"}," Ponto Facial "),n.createElement("video",{id:"video",style:{width:150},autoPlay:!0}),n.createElement("canvas",{id:"canvas",style:{display:"none"}}," "),n.createElement(l.Z,{onMouseDown:this.startRecording,onMouseUp:this.stopRecording,onTouchStart:this.startRecording,onTouchEnd:this.stopRecording,color:this.state.recording?"error":"primary"},n.createElement(d.Z,{sx:{fontSize:120}})),n.createElement("input",{type:"file",accept:"image/jpeg",id:"foto-perfil",hidden:!0,onChange:this.handleUsuarioFotoChange,disabled:this.state.calling}),n.createElement(h.Z,{sx:{width:100,height:100},src:null!==this.state.usuario?o.Z.defaults.baseURL+"/usuario/"+this.state.usuario.usuarioId+"/foto-perfil?versao="+this.state.usuario.fotoPerfilVersao:""},null!==this.state.usuario?this.state.usuario.nome.charAt(0):"?"),n.createElement(f.Z,{variant:"body"},null!==this.state.usuario?this.state.usuario.nome:""))),n.createElement(v.Z,{in:this.state.alertOpen},this.state.alert)))}}],r&&O(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),L}(n.Component);const _=function(t){var e,r,o=(0,a.s0)(),i=(0,a.TH)(),u=(e=(0,c.lr)(),r=1,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,r)||function(t,e){if(t){if("string"==typeof t)return w(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(t,e):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return n.createElement(L,m({navigate:o,location:i,searchParams:u},t))}},310:(t,e,r)=>{"use strict";r.d(e,{Z:()=>c});var n=r(1257),o=r(9775),i=r(117),a=n.Z.create({baseURL:"https://unisystem.unicom.net.br:8001/api"});a.interceptors.request.use((function(t){var e=(0,o.LP)();return e&&(t.headers.Authorization="Bearer ".concat(e)),"redirect401"in t||(t.redirect401=!0),"redirect403"in t||(t.redirect403=!0),t}),(function(t){return Promise.reject(t)})),a.interceptors.response.use((function(t){return t}),(function(t){return console.log(t),401==t.response.status&&t.config.redirect401?((0,o.gy)(),i.Z.push("/login"),new Promise((function(){}))):403==t.response.status&&t.config.redirect403?(i.Z.push("/"),new Promise((function(){}))):Promise.reject(t)}));const c=a},9775:(t,e,r)=>{"use strict";r.d(e,{$D:()=>n,LP:()=>o,gy:()=>a,o4:()=>i});var n=function(){return null!=window.localStorage.getItem("token")},o=function(){return n()?window.localStorage.getItem("token"):""},i=function(t){window.localStorage.setItem("token",t)},a=function(){window.localStorage.removeItem("token")}},7638:(t,e,r)=>{"use strict";r.d(e,{$D:()=>n,LP:()=>o,gy:()=>a,o4:()=>i});var n=function(){return null!=window.localStorage.getItem("ponto-token")},o=function(){return n()?window.localStorage.getItem("ponto-token"):""},i=function(t){window.localStorage.setItem("ponto-token",t)},a=function(){window.localStorage.removeItem("ponto-token")}}}]);